# è‡ªåŠ¨åŒ–æµ‹è¯•å…¥é—¨

è¿™éƒ¨åˆ†ä»‹ç»ä½¿ç”¨ `pytest` å’Œ `selenium` è¿›è¡Œç®€å•çš„ç½‘é¡µç•Œé¢æµ‹è¯•ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦é¦–å…ˆé…ç½®æµ‹è¯•ç¯å¢ƒï¼Œç„¶åèƒ½å¤Ÿçœ‹æ‡‚å¹¶è¿è¡Œæµ‹è¯•ä»£ç ï¼Œè¿˜å¯ä»¥åˆ¤æ–­æµ‹è¯•æ˜¯å¦é€šè¿‡ã€‚ å½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯ Django çš„åˆæ­¥.


## ç¯å¢ƒé…ç½®

### ç¯å¢ƒé…ç½®æ¦‚è¦

* éœ€è¦ä¸€ä¸ª `Python` è™šæ‹Ÿç¯å¢ƒ
    * ä¸‹è½½ `Python` å¹¶å®‰è£…
    * åˆ›å»ºä¸€ä¸ªæœ¬é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒ
    * æ¿€æ´»ï¼ˆè¿›å…¥ï¼‰æ­¤è™šæ‹Ÿç¯å¢ƒ
* å®‰è£…æ‰€éœ€åº“
* å†™ä»£ç 
    * é¡¹ç›®ç»“æ„
    * å†™ä»£ç 


### Pythonç¯å¢ƒ
`Python` ç¯å¢ƒæœ‰ä¸æ­¢ä¸€ç§é…ç½®æ–¹æ³•ï¼Œè¿™é‡Œåªä»‹ç»ä½¿ç”¨ `pip`ã€‚

å¦‚æœç”µè„‘æ²¡æœ‰ `pytohn` ç¯å¢ƒï¼Œé¦–å…ˆè¿›å…¥[python](https://www.python.org/)å®˜ç½‘ï¼Œç„¶åä¸‹è½½å®‰è£… "Python 3.x" ç‰ˆæœ¬ï¼Œ

æ¥ç€ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ï¼ˆæ¯”å¦‚ Mac çš„ `termimal`, Windows çš„ `cmd`ï¼‰ï¼Œ**è¿›å…¥é¡¹ç›®æ‰€åœ¨ç›®å½•**ï¼Œæ–°å»ºä¸€ä¸ªå·¥ä½œç¯å¢ƒå¹¶è¿›å…¥å®ƒï¼š

```bash
$  python -m venv django_env
```

Mac æ¿€æ´»ï¼š

```bash
$  source django_env/bin/activate
```

Win æ¿€æ´»ï¼š

```bash
$  django_env\Scripts\activate.bat
```

ç„¶åå®‰è£…æ‰€éœ€è¦çš„æ’ä»¶ï¼š

```bash
$  pip install pytest selenium django==3.0.8
```

### é©±åŠ¨è½¯ä»¶

#### Firefox

å¦‚æœä½¿ç”¨ `Firebox`, å®‰è£…`geckodriver`ï¼ŒMac å¯ä»¥ä½¿ç”¨`homebrew`ï¼š

```bash
* brew install geckodriver
```

æˆ–è€…å’Œ Windows ä¸€æ ·ï¼Œåˆ°[github](https://github.com/mozilla/geckodriver/releases)ä¸‹è½½å®‰è£…åŒ…å®‰è£…ã€‚

#### Chrome
ç„¶åå¦‚æœä½¿ç”¨`Chrome`çš„è¯ï¼Œåˆ°[http://npm.taobao.org/mirrors/chromedriver/](http://npm.taobao.org/mirrors/chromedriver/)ä¸‹è½½è½¯ä»¶å³å¯ã€‚

## æµ‹è¯•ä¸€ä¸ªç½‘ç«™

### è§‚å¯Ÿä»£ç 

æ–°å»ºå¹¶æ‰“å¼€"functional_tests.py", è¾“å…¥ä»£ç :

```python
from selenium import webdriver


def test_homepage_title_should_have_Django():
    browser = webdriver.Chrome(r'/Users/sziit/Programming/chromedriver')
    browser.implicitly_wait(10)
    browser.get('http://localhost:8000')

    assert 'Django' in browser.title

    browser.quit()
```

åœ¨æ­¤æ–‡ä»¶ç›®å½•, è¿è¡Œ:

```bash
pytest
```

å³å¯å¼€å§‹æµ‹è¯•. æˆ‘ä»¬å¯ä»¥å‘ç°æµ‹è¯•ä»£ç è‡ªåŠ¨æ‰“å¼€äº†æµè§ˆå™¨.

è€Œä¸”ä¸å‡ºæ„å¤–, æµ‹è¯•å¤±è´¥äº†. å¾ˆå¥½

## ä»£ç åˆ†æ

### æµ‹è¯•æ­¥éª¤

```python
# å¯¼å…¥ selemium
from selenium import webdriver

# æ–°å»ºä¸€ä¸ªæµ‹è¯•æ–¹æ³•, å¹²ä»€ä¹ˆåº”è¯¥æ€ä¹ˆæ ·
def test_homepage_title_should_have_Django():
    # ä½¿ç”¨ chrome
    browser = webdriver.Chrome('/Users/sziit/Programming/chromedriver')
    # æ‰¾ä»€ä¹ˆå…ƒç´ çš„è¯, æœ€å¤šæœ‰ 10s é’Ÿçš„æ—¶é—´
    browser.implicitly_wait(10)
    # get è¯·æ±‚è®¿é—®ç½‘å€
    browser.get('http://localhost:8000')

    # ç¡®ä¿¡åœ¨ title é‡Œé¢æœ‰ Django
    assert 'Django' in browser.title

    # æµ‹å®Œå…³é—­æµ‹è¯•ç¯å¢ƒ
    browser.quit()
```

è¿™éƒ¨åˆ†å…¶å®å°±æ˜¯å¯åŠ¨æµè§ˆå™¨, è®¾ç½®æœ€å¤š 10s çš„ç­‰å¾…æ—¶é—´, æ‰§è¡Œæµ‹è¯•, æ­¤æµ‹è¯•å®Œæˆå, é€€å‡ºæµ‹è¯•ç¯å¢ƒ

## Django
ä¸€ä¸ª python åˆ¶ä½œç½‘ç«™çš„æ¡†æ¶.
é€šè¿‡å¯åŠ¨è¿™ä¸ªæ¡†æ¶, è®©æµ‹è¯•é€šè¿‡

### åˆ›å»ºå¹¶è¿è¡Œ Django
åœ¨æƒ³è¦åˆ›å»ºç½‘ç«™çš„ä½ç½®, å‘½ä»¤è¡Œè¿è¡Œ

```bash
django-admin startproject superlists
python manage.py runserver
```

### å†æ¬¡æµ‹è¯•
è¿™æ¬¡åº”è¯¥è¿‡äº†å§.

## æˆ‘ä»¬åœ¨å¹²ä»€ä¹ˆ
æˆ‘ä»¬åœ¨æµ‹è¯•, ä¹Ÿæ˜¯åœ¨å¼€å‘, è€Œä¸”æ˜¯å…ˆæµ‹è¯•å†å¼€å‘, å…¶å®è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ç®€å•çš„æµ‹è¯•é©±åŠ¨å¼€å‘, TDD

## æˆ‘ä»¬è¦åšä»€ä¹ˆ
ä¸€ä¸ª "æˆ‘çš„è®¡åˆ’" çš„åº”ç”¨.

éœ€æ±‚æ–‡æ¡£:
1. äº§å“ç®€ä»‹
   1. ä½¿ç”¨ä»·å€¼
    ä¸€ä¸ª æˆ‘çš„è®¡åˆ’ åº”ç”¨. å¯ä»¥è®°å½•æˆ‘çš„è®¡åˆ’, æˆ‘ä»¬çš„åº”ç”¨æ›´ç®€å•.

   2. ç›®æ ‡ç”¨æˆ·ã€ä½¿ç”¨åœºæ™¯
    äº§å“çš„ä¸»è¦ç”¨æˆ·ç¾¤æ˜¯å­¦ç”Ÿ, ç”¨æˆ·ä¸»è¦åœ¨è®°æ€§ä¸å¥½çš„æ—¶å€™ä¸‹ä½¿ç”¨æˆ‘ä»¬çš„äº§å“ã€‚
2. è¡Œä¸šæ¦‚è¦
   è¡Œä¸šå‘å±•è¿…é€Ÿ, æœªæ¥å‘å±•è¶‹åŠ¿å¾ˆå¥½, ç«äº‰å¯¹æ‰‹éƒ½æ‡’å¾—åšäº†.

3. åŠŸèƒ½è¯´æ˜
   æˆ‘è¾“å…¥è®¡åˆ’, ç‚¹å‡»å›è½¦, å°±èƒ½è®°å½•æˆ‘çš„è®¡åˆ’

> å› ä¸ºå…¬å¸çš„å‘å±•, éœ€æ±‚å¯èƒ½ä¸æ–­çš„å˜åŒ–!!ğŸ˜­

## ä½œä¸š
æ ¹æ®æœ€åä¸€ä¸ªå‚è€ƒæ–‡çŒ®, è®¾è®¡ä¸€ä¸ªéœ€æ±‚æ–‡æ¡£

## å‚è€ƒèµ„æ–™
* [conda](https://docs.conda.io/projects/conda/en/latest/user-guide/index.html)
* [selenium python](https://selenium-python.readthedocs.io/)
* [Testing in Django (Part 1) â€“ Best Practices and Examples](https://realpython.com/testing-in-django-part-1-best-practices-and-examples/)
* [å¦‚ä½•å†™ä¸€ä»½ç¨‹åºå‘˜çˆ±çœ‹çš„éœ€æ±‚æ–‡æ¡£ï¼Ÿ](http://www.woshipm.com/pmd/778068.html)

